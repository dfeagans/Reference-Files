# Notes #
## General FEA ##
+ Essential vs Natural Constraints: Essential Constrints will be met exactly, but natural constraints only approximated (that's because natural constraints rely on the derivates (they are things like flux for heat), which since FEA is approximating higher order terms it won't hit exactly. "Differentiating a numerically obtained result (the nodal temperatures over some distance) increases the error". Similarly, things like "Fixed Supprt" on a static anlysis are Essential Constraints becuase they specify the the deflections at those positions are 0; i.e. *Temp and Displacement are calculated direct at the nodes, the heat flux and stress are calculated from those nodal values through interpolation and differentiation.*

## Oddities To Note ##
### Geometry Definition ###
+ If you're doing a 2d analysis make sure you START by changing the "Geometry > Analysis Type" to 2d FIRST. It won't let you change it back later. Frustrating.
+ 2d analysis sketch geometry has to be X-Y plane to get it to work. Additionally, the geometry had to be in the positive X and positive Y quadrant.
+ To simplify the analysis, it's possible to specify symmetry (for example, using the two planes that define the repeated section in the booster cone example). If this is done within the ANSYS "CAD" environment it will carry into the ANSY analysis model environment as well. It's possible to add in the Ansys Mechanical/Model environment by right clicking the "Model" highest order item and using Insert > Symmetry to insert a symmetry branch. Then you can right click the "Symmetry" branch to add the specific type of symmetry and the associated faces/axis/planes.

## Modelling ##
### Engineering Data (Material Properties) ###
+ *Create New Material* - Just type in a new name, or copy-paste to create a new material.
+ *Adding Properties*
  + Force Related: To add material properties related to forces, add a new material name and double-click the "Isotropic Elasticity" under Linear Elastic (most basic, normal.
  + Thermal Expansion Related: For basic thermal expansion material propertis, drag the "Isotropic Secant Coefficient of Thermal Expansion" into the Properties table for the new unit, and define the coefficient of thermal expansion (and room temperature 70degs F for the reference temperatur, which shouldn't matter since we're defining a constant coefficient of thermal expansion).
  + Thermal Conductivity Related: "Isotropic Thermal Conductivity" is the material property that's required to let you specify the thermal conducivity.
+ *Refresh* - Refresh the project after you're done, so that the later parts of the model have access to the material properties.
+ *Applying to Geometry* - As mentioned in the mesh section, you specify the material properties in the model by selecting the top-most level Geometry element and specificying the material in the Details window-pane.

### Meshing ###
+ *Initial Creation* - Highlight "Mesh" in the Outline tree and hit "Update" to lay down the default mesh.
  + *Suppressing Bodies* - If there are multiple bodies that have been imported in the geometry, it's possible to "suppress" the indivial ones by right-clicking the element under the Geometry list and selecting the "Suppress Body".
+ *Face Meshing* - For regularly shaped geometry it's possible to define "Face Meshing" under "Mesh Control" to make the mesh more regularly speced.
+ *Method* - You can specify the mesh method (which determines the shape of the mesh elements). It's possible to use hexahedral meshes to get same/better fidelity with fewer nodes. To achieve that under "Mesh Control", "Method", then changing the Method detial to MultiZone. Then remesh. MultiZone chops the part up into volumes it can fill with hexahedrals automatically so works better on random geometry. "Hex Dominant" is the next best method, that's useful when the MultiZone hex method demands more massaging than you're willing to put in at the moment.
+ *Element Sizing* - To control the element sizes, using "Mesh Control > Sizing". You can select entire bodys, single faces, or even edges and let it automatically space it out. Importantly, you can specify multiple sizing controls (for example, to have finer resolution around critical bores, but thave the rest of the body at some larger default element size). Then you can define the "Element Size" edge length. To force that sizing to take effect (as opposed to just be suggested), under the Face Sizing Details window in the bottom left, change the "Behavior" setting (under "Advanced") to "Hard". Then "Update" again to rebuild the mesh.
  + *Preview* - Note that before you regenerate the mesh, if you put the mouse over the geometry you're applying the sizing control to it will show a bull-size who's diameter is the length of the edge size you've specified.
+ *Warnings* - Sometimes it will spit a Warning regarding the "local face element sizes being larger thanthe global maximum size..." that's because the top level Mesh element has a "Size Function" setting whose default setting, "Curvate", institutes some Min and Max allowable Mesh face sizes. To get rid of that setting, after selecting "Mesh" in the top-left pane, under the Details of "Mesh" pane in the bottom left, under "Sizing", change the "Size Function" to "Adaptive".
+ *Viewing Mesh Interior* - It's possible to view sections of the mesh to interrogate the internal quality using section views (frankly this is entirely open in ALL steps of Mechanic, even analysis features). To create one, at the very top of the screw, select the "New Section Plane" button and draw a line to indicat where you want the section. You can further manage the section view details using the Section Planes window in the bottom left. Options include "Show Whole Elements" and the "Edit Section Plane". The latter lets you drag the section normal through the part (by clicking and dragging the square), and change the visibility of the section sides by clicking each side of the line (even possible to cut show a section cut by hiding both sides). To hide/deactive the section, but keep it saved for later use, just uncheck the box to the left of it's name.
+ *Number of Elements/Nodes* - If you want to see the number of elements/nodes your mesh has, select the main "Mesh" element in the top left and then they're reported in the in the bottom left pane, under "Statistics" section.
+ *Mesh Quality* - After selecting the top-level Mesh element, in the details there is a Quality section where you can specify a "Mesh Metric" to evaluate the final mesh. You can flick through different metrics (explained in the Help), and view their plots. Otherwise, you can more simply view these plots by showing the using the "Display Style" detail.
  + *Skewness* is a common metric. It creates a plot evaluting the skewness of each mesh element (plotted 0 to 1, 1 being the worst). Most importantly, if you click on the bars in the chart, it will limit the visibility to those elements for you to inspect closely (and possibly mesh more finely). Highly skewed elemets reduce the accuracy of the intepolation and the stress distribution. There is Ansys Help document (search for "Skewness" to find it), that indicates:
	+ excellent is 0-0.25
	+ good   is  0.25-0.5
	+ fair   is  0.5-0.75
	+ poor   is  0.75-0.9
	+ bad   is 0.9 to 1.0
+ *Node Interpolation Model* - You'll never want to do this since it's usually always better (only reason I could think of is an educational example where you're hand checking it), but it's possible to reduce the interpolation between the nodes by selecting the main "Mesh" element and then under the details changing "Element Order" from "Quadratic" (quadratic interpolation with effectively extra node between main nodes) to "Linear".
  + Note that since ANSYS defaults to Quadratic, which typical improves the FEA a lot the main method for improving the accuracy of the model in ANSYS is increasing the resolutiono of the mesh.

### Material Properties to Geometry ###
+ You change/define the Geometry material properties by selecting the *specific* Geometry element in the menu in the top-left and then changing the "Assignemnt" detail, under "Material" in the bottom left "detail" pane. This is again in the ansys "Model" "program" where meshing, boundary conditions, solving, and post-pro are done.
  + Note that you can only select materials that have already been defined in the "Engineering Data" block on the main "Project Schematic" page though.

### Simulating Assemblies ###
+ *Contacts Between Components* - If you bring in an assembly, ansys will try to automatically define some contacts between the components (under the Connections > Contacts group). Sometimes it's best to just delete all of them and manual define them using *Contacts > Manual Contact Region*. You set the type of contant under the Definition > Type detail:
	+ *Selection Order: Contact VS Target* - When you select two things to be in contact, use the smaller body to be contact and the larger as the target part of the selection. That's what's recommended in the user manual.
	+ *Type: Bonded* - Lets you define things to be "bonded" between two surfaces. Example: Nut to a bolt.
	+ *Type: Frictionless* - Two parts mated together by bolts that don't have friction between them. Example: Two parts of booster cone, that are bolted together. Another would be nut to face it's clamping or bolt head to face it's clamping. Another example would be the bolt grip surface to the part that it slides through.

### Load/Thermal Boundary Conditions ###
+ *Applying* - To apply them, select the Folder that defines your analysis, for example "Steady-State Thermal", "Environment" buttons should appear that relate to the type of simulation you're doing whic you click to apply to the list. Once you've clicked and added that boundary condition, you can select the edge, face, or element you want to apply it to and then note in the bottom left "Details" pane there's a "Geometry" detail that you can hit apply, cancel, or reselect at. It's very useful to use the selection filter buttons at the top of the window to adjust what you can select at that time so you can apply the condition to the specific element you want, whether that be a node, edge, of face. You can then further define the details/magnitudes of the boundary condition in that same bottom-left "Details" pane for it.
+ *Types for FEA Static Analysis*
  + *Fixed Support* - Non-moving surfaces or components, with no deflection.
  + *Frictionless Support* - Most basic support type, displacement normal to face is 0 (example part just sitting on the table, will support the part in that direction), and tangential traction is 0 (the part growing/straining won't be resisted in that direction).
  + *Force* - Actually applied force, of note on this type is it is often useful to change the "Define By" detail to be components and then type the individual magnitdues in. Note that it's possible to apply "Ramping Loads", if the loads are very high the load can be a shock event and give the solver a difficult time, this ramps the laod up and makes it more likely to solve.
  + *Bolt Pre-Tension (Pre-Load)* - Allows you to model the bolt preload on the system. Note you'll have to select the GRIP surface of the bolt. In the example of the booster cone, with bolts bolting the two parts of the booster cone together it was necessary to use a 3 step solution (first bolt pre-load to set up those stresses, second pressure from the thruster, and third general thermal strain from temp increase).
	+ *Multi-Step Analysis* - Make it so the analysis has more than one step: Select the main analysis group (usually "Static Structural"), and increasing the number of steps in the analysis.
	+ *Pre-Load Over Each Step* - Using tabular condition for the bolt pre-load (right click Magnitude detail to get the option), the first step is the targeted pre-load (Define By: Load / Preload: Number you want), and then after that you'll keep the pre-load applied at all the other steps using (Define By: Lock / Preload: N/A).
  + *Pressure* - Pressure loads to be applied (likely using the FACE selected filter). Again very likely to be applied in a separate load step, so would be applied using a tabular definition (under Details for the Pressure, change the "X-Axis" detail to "Time" (This is located under the "Graph Controls" group). To turn it on and off, just set the Scale parameter to 1 and 0, respectively.
  + *Thermal Condition* - Lets you apply a temperature to components of the model.
	+ *Delayed Solution/Applicaiton of Thermal Stresses* - Sometimes it's most useful to apply the thermal strain AFTER everything else has been already calculated. That's done by telling the temperature increase to occur at a later step:
	  + Under the Details of the Thermal Condition, right click magnitude and select tabular. That lets you specify the temperature at each load step. You can either specify the temperature itself, or the delta T from the original environement temperature (which is specified in the details for the main analysis, under the Options group in the Details).
	  + Sometimes it's useful to include a temperature on ALL the bodies of the assembly and just assume things have been saturated (like in the booster example), other times not.
+ *Types for Thermal Conductivity*
  + *Temperature* - Set fixed temperature at edge, face, etc.
  + *Convection* -
  + *Conduction* -
  + *Heat Flux* - Note: sign convention on heat flux domain conditions is positive is inward to the body and normal to the edge. On the other hand, when you check the heat flux in the solutions it uses the normal coordinate system sign convention. This needs to be remembered when applying/analyzing heat fluxes on the RH-side of parts, for example.

### Solving/Post Processing ###
+ *Initial Solve* - Just select solutions (might not be necessary) and hit "Solve" button.
  + Sometimes if it isn't solving (and it's an assembl), it may be useful to change the contacts to the simplest "bonded"-type to hopefully result in it converging. Then it's possible to slowly change things into more complex contact types (such as frictionless) to eventually discover what's causing your issue.
  + *Force Convergence* - It's possible to view the force convergence plot and solution progressing. While the solution is running (selection Solution item and hit Solve), select "Solution Information" and make sure the Solution Output under Details and change it to Force Convergence. This lets you see the plot of how the netwon-raphson Force estimate is iterating to solve the model. The "Force Criterion" is the tolerance band created (some percentage of your initial force/aggregate load on the model) that shows when the solution is acceptable. The "Force Cnvergence" is the sum of all the force errors for the entire body. The vertical dotted lines indicate the step where a specific load step gets converged.
	+ *Aborting* - Sometimes it's also helpful to see that the solution is diverging and not approaching the tolerance band, so you can abort.
  + *Mesh Size Effects* - Stress is more sensitive than displacement to the mesh and has a larger relative error. Similarly, heat flux was more sensitive than temperature to the mesh resolution/number of nodes. Temp and Displacement are calculated direct at the nodes, the heat flux and stress are calculated from those nodal values through interpolation and differentiation.

#### Post-Processing ####
+ *Post-Processing* - To Apply Post-Analysis plots, select the "Solution" folder in the top-left pain, which will make all the post-processing options appear at the top. You click the ones you want to add. Then you select the post-process step itself in the tree and right-click "Evaluate All Results" to get it to apply that analysis and display the results.
  + *Multi-Step Analysis* - If multi-step analysis is employed, make sure you specify which load step you want to see the analysis for using the Display Time detail.
  + *Video/Animation* - It's possible to animate the displacement, stress, anything by hitting the play button the the Graph window that comes up for each post-anlysis feature. If you do multistep analysis and you just want to loop through one step you can click and select a region of the graph window to look over that specific section.
  + *Easy way to Copy Post-Analysis Features* - To create a copy of one (for example to look at a different time step), just grab it and drag it the "Solution" branch header. It will drop in a duplicated one.
  + *Hand-Applied Probes During Larger Analysis Plots* - While selecting a larger analysis feature, it's possible to add probes on the plots by selecting the "Probe" button and then click on the analysis plot/view to put them down. Just remember to delete them you have to change the selection filter to the "Label or Imported Objects" tag button at the top-most-left to select them again and use the delete key to delete them off it.
  + *Specific Location Defined Analysis Probes* - To report result of a point on the geometry, you select the Solutions folder, then "Probe" and the analysis you'd like to perform. Then in the "Details" pane change the "Location Method" to Coordinate System and then select the desiired Coordinate System/position from the list under the "Location" detail drop-down. Since this method is using the probe analysis you'll have to right click the analysis in the tree and select "Evalute All Results".
	+ *Coordinate Systems* - To make those coordinate systems, whom's originas act like the points for the probe locations:
	  + CSYS in the middle of elemenet: select "Coordinate System", select the face yo uwant to put it down on and select the little csys button to the right of the "Coordinate Systems" heading.
	  + CSYS dimensioned relative to existing CSYS - Create a new csys by clicking the little button to the right of the "Coordinate System" heading, the in the details of that new cys, change the "Define By" detail to be an already created CSYS (likely the Global Coordinates), then you can type X and Y offset distances to put the new one down at.
	  + CSYS dimensioned at Node - Similarly create Csys, but in the "Define by" detail use "Geometry Selection", change the selection filter to "Node" and the select the specific node, and hit Apply.
	  + Averaged Position - If you select some geometry elements and hit CSYS it will place the csys in the weighted center of them. Nice when you have two symmetric elements you want to put it in the center of.
  + *Analysis Along Line* - Select "Model" top-most feature in the tree > then in the buttons on the top menu's "Construction Geometry" > "Path" then in the element details for that new path you can specify the XY starting and ending positions of the line. Then in an analyse feature you can change the "Scoping Method" to be that path, which will show after the usual "Evaluate All Results" after changing that details. Note the number of elements along the line is define in the Path details.
+ *Vectors Analysis - Heat Flux or Other Vector Quantity* - After the initial application of a vector post-processing element it'll be shown as a normal color gradient plot, it's possible to change the plot into the more readily digested (especially if it's heat flux) arrow vector with direction/magnitude by clicking the button that looks like three colored horizontal arrows point to the left (labeled "Graphics"). Then you can use the other options to change the thickness and scaling of the arrows.
+ *Post-Analyis Visibility* - It shows whatever analysis you've got selected in the top-left tree.

#### Post-Analysis Types for FEA/Forces/Stresses ####
+ *Total Displacement* - shows the nodal displacements and is very quick to show (since it is the main thing that the FEA solves and is therefore not post-processed at all). It's possible to show the wireframe of the undeflected component, for comparison, using the rainbow cube drop-down button.
  + With displacement the color graph isn't that useful since we know already have an appreciation for how it's used, therefore changing to solid fill for the movies is good enough.
+ *Deformed/Un-Deformed* - Note that the drop-down just to the right of the result, lets you control whether you see the undeflected, deflected (1.0 scale), or exagerated/scaled deflection, for all subsequent analysis steps.
+ *Equivalent Stress (Von-Mises Stress)* - equivalent tensile stress. Allows you to predict the yielding of a material in a complex load case by resolving the complex load case into a scalar. This allows you to compare that stress to the yield stress capturing in the simpler, more readily available yield stress observed in a uniaxial tensile test.
+ *Gaps* - If you were modelling an assembly, you can check the gaps between the elements using Tools > Contact Tool. Then you check/uncheck all the contants you want to analyze (usually not all of them), then on the top-left of the main menu's you hit Contact > Gap to add the actual Gap analysis to your tree.
+ *Bolt Pre-Tension* - It's possible to drag the bolt pretension into the solutions group to look at the "Adjustment" detail to see how much Creo "shortened" the bolt to represent the preload. In FEA, it's best to model the bolt with the preload to see the results of the preload on the assembly, but still size/select/approve the bolts using more simple bolt equations and hand calcs on the minor area.

### Validation ###
+ A good method for VERIFYING the ANSYS model is checking that basic energy/force was conserved. That's done by viewing the Reactions, using Probe > Reaction (thermal) or Force Reaction (static model), then Evaluating All Results along the boundary condition edge that's valid (for example on a thermal problem where the temp was constant on one edge and there was heat flux on the other edge, doing the Reaction on the temperature edge would let you prove the heat flux through that constant temperatur edge matched the known heatflux of the other edge. On a static stress model the force at the fixed element should perfectly match the applied load). Just remember to select the specify boundary condition before evaluating the solution. *Remember:* On FEA, the overal energy and force will be conserved, like in this case, but it won't be element to element because of how things are discritized.
<!--stackedit_data:
eyJoaXN0b3J5IjpbMzc5MzQyODE3XX0=
-->